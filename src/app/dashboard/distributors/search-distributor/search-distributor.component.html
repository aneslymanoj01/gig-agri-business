<div class="search-distributor-page">
  <!-- Header Section -->
  <div class="page-header">
    <div class="header-content">
      <div class="breadcrumb">
        <span class="breadcrumb-item">Dashboard</span>
        <mat-icon class="breadcrumb-separator">chevron_right</mat-icon>
        <span class="breadcrumb-item">Distributors</span>
        <mat-icon class="breadcrumb-separator">chevron_right</mat-icon>
        <span class="breadcrumb-item active">Search</span>
      </div>
      <h1 class="page-title">
        <mat-icon class="title-icon">search</mat-icon>
        Search Distributors
      </h1>
      <p class="page-subtitle">Find and manage existing distributors in your network</p>
    </div>
  </div>

  <!-- Content Section -->
  <div class="content-section">
    <div class="content-container">
      
      <!-- Actions Bar -->
      <div class="actions-bar">
        <button mat-raised-button color="primary" (click)="onRefresh()" [disabled]="isLoading">
          <mat-icon>refresh</mat-icon>
          Refresh
        </button>
        <span class="results-count" *ngIf="!isLoading">
          Showing {{ distributors.length }} of {{ totalElements }} distributors
        </span>
      </div>

      <!-- Section Title -->
      <div class="section-header">
        <h3>Distributors List</h3>
        <div class="section-divider"></div>
      </div>

      <!-- Loading State -->
      <div *ngIf="isLoading" class="loading-container">
        <mat-spinner diameter="40"></mat-spinner>
        <p>Loading distributors...</p>
      </div>

      <!-- Empty State -->
      <div *ngIf="!isLoading && distributors.length === 0" class="empty-state">
        <mat-icon class="empty-icon">people_outline</mat-icon>
        <h3>No Distributors Found</h3>
        <p>There are no distributors registered in the system yet.</p>
        <button mat-raised-button color="primary" routerLink="/dashboard/distributors/add">
          <mat-icon>add</mat-icon>
          Add First Distributor
        </button>
      </div>

      <!-- Data Table -->
      <div *ngIf="!isLoading && distributors.length > 0" class="table-container">
        <table mat-table [dataSource]="distributors" class="distributors-table">
          
          <!-- ID Column -->
          <ng-container matColumnDef="id">
            <th mat-header-cell *matHeaderCellDef class="id-column">ID</th>
            <td mat-cell *matCellDef="let distributor" class="id-column">
              {{ distributor.id }}
            </td>
          </ng-container>

          <!-- Name Column -->
          <ng-container matColumnDef="name">
            <th mat-header-cell *matHeaderCellDef>Distributor Name</th>
            <td mat-cell *matCellDef="let distributor">
              {{ distributor.name }}
            </td>
          </ng-container>

          <!-- Email Column -->
          <ng-container matColumnDef="email">
            <th mat-header-cell *matHeaderCellDef>Email</th>
            <td mat-cell *matCellDef="let distributor">
              <a [href]="'mailto:' + distributor.email" class="email-link">{{ distributor.email }}</a>
            </td>
          </ng-container>

          <!-- Contact Number Column -->
          <ng-container matColumnDef="contactNo">
            <th mat-header-cell *matHeaderCellDef>Contact</th>
            <td mat-cell *matCellDef="let distributor">
              <a [href]="'tel:' + distributor.contactNo" class="contact-link">{{ distributor.contactNo }}</a>
            </td>
          </ng-container>

          <!-- City Column -->
          <ng-container matColumnDef="city">
            <th mat-header-cell *matHeaderCellDef>City</th>
            <td mat-cell *matCellDef="let distributor">
              {{ distributor.city }}
            </td>
          </ng-container>

          <!-- Contact Person Column -->
          <ng-container matColumnDef="contactPerson">
            <th mat-header-cell *matHeaderCellDef>Contact Person</th>
            <td mat-cell *matCellDef="let distributor">
              {{ distributor.contactPerson }}
            </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns;" class="distributor-row"></tr>
        </table>
      </div>

      <!-- Pagination -->
      <div *ngIf="!isLoading && distributors.length > 0 && totalPages > 1" class="pagination-container">
        <div class="pagination-info">
          <span>Page {{ currentPage + 1 }} of {{ totalPages }}</span>
        </div>
        <div class="pagination-controls">
          <button mat-icon-button [disabled]="isFirst" (click)="onPageChange(0)" matTooltip="First Page">
            <mat-icon>first_page</mat-icon>
          </button>
          <button mat-icon-button [disabled]="isFirst" (click)="onPageChange(currentPage - 1)" matTooltip="Previous Page">
            <mat-icon>chevron_left</mat-icon>
          </button>
          
          <div class="page-numbers">
            <button 
              *ngFor="let page of getPageNumbers()" 
              mat-button 
              [class.active]="page === currentPage"
              (click)="onPageChange(page)">
              {{ page + 1 }}
            </button>
          </div>
          
          <button mat-icon-button [disabled]="isLast" (click)="onPageChange(currentPage + 1)" matTooltip="Next Page">
            <mat-icon>chevron_right</mat-icon>
          </button>
          <button mat-icon-button [disabled]="isLast" (click)="onPageChange(totalPages - 1)" matTooltip="Last Page">
            <mat-icon>last_page</mat-icon>
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
